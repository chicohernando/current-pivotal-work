{% extends 'base.html.twig' %}
{% block body %}
    <div class="container">
        <div class="row the-space-beneath">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="section-content">
                    <h2>{{ project.name }} Details</h2>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row the-space-beneath">
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                <div class="wb-traffic-inner notika-shadow sm-res-mg-t-30 tb-res-mg-t-30">
                    <div class="website-traffic-ctn">
                        <h2><span class="counter">{{ project.current_velocity }}</span></h2>
                        <p>Velocity</p>
                    </div>
                    <div class="sparkline-bar-stats1">
                        {% for iteration in iterations|reverse %}
                            {{ iteration.velocity ~ (not loop.last ? ',') }}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                <div class="wb-traffic-inner notika-shadow sm-res-mg-t-30 tb-res-mg-t-30">
                    <div class="website-traffic-ctn">
                        <h2><span class="counter">{{ ((iterations|first).accepted_points) }}</span></h2>
                        <p>Accepted Points</p>
                    </div>
                    <div class="sparkline-bar-stats2">
                        {% for iteration in iterations|reverse %}
                            {{ iteration.accepted_points ~ (not loop.last ? ',') }}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                <div class="wb-traffic-inner notika-shadow sm-res-mg-t-30 tb-res-mg-t-30">
                    <div class="website-traffic-ctn">
                        <h2><span class="counter">{{ ((iterations|first).team_strength * 100)|number_format(2) }}</span>%</h2>
                        <p>Team Strength</p>
                    </div>
                    <div class="sparkline-bar-stats3">
                        {% for iteration in iterations|reverse %}
                            {{ (iteration.team_strength * 100)|number_format(2) ~ (not loop.last ? ',') }}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                <div class="wb-traffic-inner notika-shadow sm-res-mg-t-30 tb-res-mg-t-30">
                    <div class="website-traffic-ctn">
                        <h2><span class="counter">{{ ((iterations|first).effective_points)|number_format(2) }}</span></h2>
                        <p>Effective Points</p>
                    </div>
                    <div class="sparkline-bar-stats4">
                        {% for iteration in iterations|reverse %}
                            {{ iteration.effective_points ~ (not loop.last ? ',') }}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Start Recent Iterations Area -->
    <div class="data-table-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="data-table-list">
                        <div class="basic-tb-hd">
                            <h2>Recent Iterations</h2>
                        </div>
                        <div class="table-responsive">
                            <table id="data-table-basic" class="table table-striped" data-page-length="5">
                                <thead>
                                    <tr>
                                        <th>Iteration</th>
                                        <th>Velocity</th>
                                        <th>Accepted Points</th>
                                        <th>Team Strength</th>
                                        <th>Effective Points</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for iteration in iterations %}
                                        <tr>
                                            <td><a href="/project/{{ project.id }}/iteration/{{ iteration.number }}/">{{ iteration.start|date("m/d/Y") }} - {{ iteration.finish|date("m/d/Y") }}</a></td>
                                            <td>{{ iteration.velocity }}</td>
                                            <td>{{ iteration.accepted_points }}</td>
                                            <td>{{ (iteration.team_strength * 100)|number_format(2) }}%</td>
                                            <td>{{ iteration.effective_points|number_format(2) }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Recent Iterations Area -->
{% endblock %}